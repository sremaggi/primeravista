import { format } from "date-fns";

export const highDemands = [
  {
    startDate: new Date(2023, 6, 7),
    endDate: new Date(2023, 6, 8),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },
  {
    startDate: new Date(2023, 6, 15),
    endDate: new Date(2023, 6, 17),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },
  {
    startDate: new Date(2023, 7, 12),
    endDate: new Date(2023, 7, 16),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },
  {
    startDate: new Date(2023, 8, 14),
    endDate: new Date(2023, 8, 20),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },
  {
    startDate: new Date(2023, 9, 6),
    endDate: new Date(2023, 9, 10),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },
  {
    startDate: new Date(2023, 9, 27),
    endDate: new Date(2023, 9, 31),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },
  {
    startDate: new Date(2023, 11, 1),
    endDate: new Date(2023, 11, 3),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },
  {
    startDate: new Date(2023, 11, 8),
    endDate: new Date(2023, 11, 10),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },
  {
    startDate: new Date(2023, 11, 15),
    endDate: new Date(2023, 11, 17),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },
  {
    startDate: new Date(2023, 11, 21),
    endDate: new Date(2024, 0, 7),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },
  {
    startDate: new Date(2024, 0, 12),
    endDate: new Date(2024, 0, 14),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },
  {
    startDate: new Date(2024, 0, 19),
    endDate: new Date(2024, 0, 21),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },
  {
    startDate: new Date(2024, 0, 26),
    endDate: new Date(2024, 0, 31),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },
  {
    startDate: new Date(2024, 1, 2),
    endDate: new Date(2024, 1, 4),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },
  {
    startDate: new Date(2024, 1, 9),
    endDate: new Date(2024, 1, 11),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },
  {
    startDate: new Date(2024, 1, 16),
    endDate: new Date(2024, 1, 18),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },
  {
    startDate: new Date(2024, 1, 23),
    endDate: new Date(2024, 1, 26),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },
];

export const lowDemands = [
  {
    startDate: new Date(2023, 5, 2),
    endDate: new Date(2023, 5, 3),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },
  {
    startDate: new Date(2023, 5, 9),
    endDate: new Date(2023, 5, 10),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },
  {
    startDate: new Date(2023, 5, 16),
    endDate: new Date(2023, 5, 17),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },
  {
    startDate: new Date(2023, 5, 23),
    endDate: new Date(2023, 5, 24),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },
  {
    startDate: new Date(2023, 5, 30),
    endDate: new Date(2023, 6, 1),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },

  {
    startDate: new Date(2023, 6, 21),
    endDate: new Date(2023, 6, 22),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },
  {
    startDate: new Date(2023, 6, 28),
    endDate: new Date(2023, 6, 29),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },
  {
    startDate: new Date(2023, 7, 4),
    endDate: new Date(2023, 7, 6),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },
  {
    startDate: new Date(2023, 7, 18),
    endDate: new Date(2023, 7, 20),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },
  {
    startDate: new Date(2023, 7, 25),
    endDate: new Date(2023, 8, 13),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },
  {
    startDate: new Date(2023, 8, 22),
    endDate: new Date(2023, 9, 5),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },
  {
    startDate: new Date(2023, 9, 11),
    endDate: new Date(2023, 9, 26),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },
  {
    startDate: new Date(2023, 10, 1),
    endDate: new Date(2023, 10, 30),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },
  {
    startDate: new Date(2023, 11, 4),
    endDate: new Date(2023, 11, 7),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },
  {
    startDate: new Date(2023, 11, 11),
    endDate: new Date(2023, 11, 14),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },
  {
    startDate: new Date(2023, 11, 18),
    endDate: new Date(2023, 11, 20),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },
  {
    startDate: new Date(2024, 0, 8),
    endDate: new Date(2024, 0, 11),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },
  {
    startDate: new Date(2024, 0, 15),
    endDate: new Date(2024, 0, 18),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },
  {
    startDate: new Date(2024, 0, 22),
    endDate: new Date(2024, 0, 25),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },
  {
    startDate: new Date(2024, 1, 5),
    endDate: new Date(2024, 1, 8),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },
  {
    startDate: new Date(2024, 1, 12),
    endDate: new Date(2024, 1, 15),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },
  {
    startDate: new Date(2024, 1, 19),
    endDate: new Date(2024, 1, 22),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },
  {
    startDate: new Date(2024, 1, 27),
    endDate: new Date(2024, 2, 10),
    key: "selection",
    disabled: true,
    showDateDisplay: false,
  },
];

export const offerts = [];

export function getDatesInRange(startDate, endDate) {
  const date = new Date(startDate.getTime());

  const dates = [];

  while (date <= endDate) {
    dates.push(new Date(date));
    date.setDate(date.getDate() + 1);
  }

  return dates;
}

export function getLowDemand(state) {
  let count = 0;
  const selectedDates = getDatesInRange(state[0].startDate, state[0].endDate);
  selectedDates.forEach((sd) => {
    lowDemands.forEach((lds) => {
      const lowDemands = getDatesInRange(lds.startDate, lds.endDate);
      lowDemands.forEach((ld) => {
        if (
          sd.getFullYear() === ld.getFullYear() &&
          sd.getMonth() === ld.getMonth() &&
          sd.getDate() === ld.getDate()
        ) {
          count += 1;
        }
      });
    });
  });

  if (count === 0) {
    return 0;
  }
  return count - 1;
}

export function getSelectedNights(state) {
  const days =
    (state[0].endDate.getTime() - state[0].startDate.getTime()) /
    (1000 * 3600 * 24);
  return days;
}

export function getNormalDay(state) {
  const days =
    getSelectedNights(state) - (getLowDemand(state) + getHighDemand(state));
  return days;
}

export function getHighDemand(state) {
  let count = 0;
  const selectedDates = getDatesInRange(state[0].startDate, state[0].endDate);
  selectedDates.forEach((sd) => {
    highDemands.forEach((lds) => {
      const highDemands = getDatesInRange(lds.startDate, lds.endDate);
      highDemands.forEach((ld) => {
        if (
          sd.getFullYear() === ld.getFullYear() &&
          sd.getMonth() === ld.getMonth() &&
          sd.getDate() === ld.getDate()
        ) {
          count += 1;
        }
      });
    });
  });

  if (count === 0) {
    return 0;
  }
  return count - 1;
}

export function customDayContent(day) {
  let extraDot = null;

  offerts.forEach((b) => {
    const dates = getDatesInRange(b.startDate, b.endDate);
    dates.forEach((d) => {
      if (
        day.getFullYear() === d.getFullYear() &&
        day.getMonth() === d.getMonth() &&
        day.getDate() === d.getDate()
      ) {
        extraDot = (
          <div
            style={{
              height: "6px",
              width: "6px",
              borderRadius: "100%",
              background: "#00D4C1",
              position: "absolute",
              top: 2,
              right: 2,
            }}
          />
        );
      }
    });
  });

  highDemands.forEach((b) => {
    const dates = getDatesInRange(b.startDate, b.endDate);
    dates.forEach((d) => {
      if (
        day.getFullYear() === d.getFullYear() &&
        day.getMonth() === d.getMonth() &&
        day.getDate() === d.getDate()
      ) {
        extraDot = (
          <div
            style={{
              height: "8px",
              width: "8px",
              borderRadius: "100%",
              background: "orange",
              position: "absolute",
              top: 2,
              right: 2,
            }}
          />
        );
      }
    });
  });

  lowDemands.forEach((b) => {
    const dates = getDatesInRange(b.startDate, b.endDate);
    dates.forEach((d) => {
      if (
        day.getFullYear() === d.getFullYear() &&
        day.getMonth() === d.getMonth() &&
        day.getDate() === d.getDate()
      ) {
        extraDot = (
          <div
            style={{
              height: "6px",
              width: "6px",
              borderRadius: "100%",
              background: "yellow",
              position: "absolute",
              top: 2,
              right: 2,
            }}
          />
        );
      }
    });
  });

  return (
    <div>
      {extraDot}
      <span>{format(day, "d")}</span>
    </div>
  );
}
